<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="5557.5px" preserveAspectRatio="none" style="width:4392px;height:5557px;" version="1.1" viewBox="0 0 4392 5557" width="4392.5px" zoomAndPan="magnify"><defs><filter height="1" id="b16f910qo971x30" width="1" x="0" y="0"><feFlood flood-color="#ADD8E6" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="45" lengthAdjust="spacingAndGlyphs" textLength="515" x="1928.125" y="71.7139">Keyple Plugin Remote SE</text><text fill="#000000" font-family="sans-serif" font-size="45" lengthAdjust="spacingAndGlyphs" textLength="815" x="1778.125" y="128.3154">RemoteSeServerPlugin API (22/05/2020)</text><text fill="#000000" font-family="sans-serif" font-size="45" lengthAdjust="spacingAndGlyphs" textLength="562.5" x="1904.375" y="184.917">(with an ObservableReader)</text><rect fill="#FEF9E7" height="5317.3828" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 2.5;" width="2148.75" x="298.75" y="214.8047"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152.5" x="1296.875" y="248.5425">Native SE</text><rect fill="#FDF2E9" height="5317.3828" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 2.5;" width="1800" x="2452.5" y="214.8047"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157.5" x="3273.75" y="248.5425">Virtual SE</text><rect fill="#FFFFE0" height="3291.6797" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="85" y="1964.9609"/><rect fill="#ADD8E6" height="303.5156" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="480" y="1964.9609"/><rect fill="#ADD8E6" height="116.5234" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="826.25" y="1293.1641"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="826.25" y="1704.8242"/><rect fill="#FFC0CB" height="4335.1367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="1467.5" y="921.5039"/><rect fill="#ADD8E6" height="2357.7539" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2210" y="2876.3867"/><rect fill="#ADD8E6" height="182.4023" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2672.5" y="2911.3867"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2672.5" y="3169.668"/><rect fill="#ADD8E6" height="110.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2672.5" y="5047.3828"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="3321.4258"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="3841.6992"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="4034.3359"/><rect fill="#ADD8E6" height="35" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="4186.0938"/><rect fill="#ADD8E6" height="227.6367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="4617.9883"/><rect fill="#FFC0CB" height="4720.4102" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3921.25" y="536.2305"/><rect fill="#FDF2E9" height="498.6523" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 5.0;" width="4235" x="32.5" y="4366.9727"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="97.5" x2="97.5" y1="511.2305" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="491.25" x2="491.25" y1="1366.4258" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="837.5" x2="837.5" y1="1254.7852" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="1480" x2="1480" y1="511.2305" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="2222.5" x2="2222.5" y1="1143.1445" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="2685" x2="2685" y1="750.9277" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="3265" x2="3265" y1="3009.6484" y2="5279.1406"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 5.0,5.0;" x1="3932.5" x2="3932.5" y1="511.2305" y2="5279.1406"/><rect fill="#FEFECE" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="80" x="57.5" y="429.707"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="45" x="75" y="483.54">SE</text><rect fill="#FEFECE" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="80" x="57.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="45" x="75" y="5330.4736">SE</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="367.5" x="308.75" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="332.5" x="326.25" y="5330.4736">ObservableReader</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="272.5" x="702.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237.5" x="720" y="5330.4736">ReaderPlugin</text><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="1350" y="503.54">Native SE App</text><ellipse cx="1480" cy="334.707" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M1480,354.707 L1480,422.207 M1447.5,374.707 L1512.5,374.707 M1480,422.207 L1447.5,459.707 M1480,422.207 L1512.5,459.707 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="1350" y="5312.9736">Native SE App</text><ellipse cx="1480" cy="5345.6641" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M1480,5365.6641 L1480,5433.1641 M1447.5,5385.6641 L1512.5,5385.6641 M1480,5433.1641 L1447.5,5470.6641 M1480,5433.1641 L1512.5,5470.6641 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="430" x="2007.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="395" x="2025" y="5330.4736">NativeSeClientService</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="445" x="2462.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="410" x="2480" y="5330.4736">RemoteSeServerPlugin</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="667.5" x="2932.5" y="5276.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="632.5" x="2950" y="5330.4736">RemoteSeServerObservableReader</text><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="3798.75" y="459.5166">Virtual SE App</text><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="10" x="4043.75" y="459.5166">:</text><text fill="#000000" filter="url(#b16f910qo971x30)" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="602.5" x="3625" y="503.54">ObservablePlugin.PluginObserver</text><ellipse cx="3933.75" cy="290.6836" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M3933.75,310.6836 L3933.75,378.1836 M3901.25,330.6836 L3966.25,330.6836 M3933.75,378.1836 L3901.25,415.6836 M3933.75,378.1836 L3966.25,415.6836 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="3798.75" y="5312.9736">Virtual SE App</text><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacingAndGlyphs" textLength="10" x="4043.75" y="5312.9736">:</text><text fill="#000000" filter="url(#b16f910qo971x30)" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="602.5" x="3625" y="5356.9971">ObservablePlugin.PluginObserver</text><ellipse cx="3933.75" cy="5389.6875" fill="#FEFECE" rx="20" ry="20" style="stroke: #A80036; stroke-width: 5.0;"/><path d="M3933.75,5409.6875 L3933.75,5477.1875 M3901.25,5429.6875 L3966.25,5429.6875 M3933.75,5477.1875 L3901.25,5514.6875 M3933.75,5477.1875 L3966.25,5514.6875 " fill="none" style="stroke: #A80036; stroke-width: 5.0;"/><rect fill="#FFFFE0" height="3291.6797" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="85" y="1964.9609"/><rect fill="#ADD8E6" height="303.5156" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="480" y="1964.9609"/><rect fill="#ADD8E6" height="116.5234" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="826.25" y="1293.1641"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="826.25" y="1704.8242"/><rect fill="#FFC0CB" height="4335.1367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="1467.5" y="921.5039"/><rect fill="#ADD8E6" height="2357.7539" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2210" y="2876.3867"/><rect fill="#ADD8E6" height="182.4023" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2672.5" y="2911.3867"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2672.5" y="3169.668"/><rect fill="#ADD8E6" height="110.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="2672.5" y="5047.3828"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="3321.4258"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="3841.6992"/><rect fill="#ADD8E6" height="75.8789" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="4034.3359"/><rect fill="#ADD8E6" height="35" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="4186.0938"/><rect fill="#ADD8E6" height="227.6367" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3253.75" y="4617.9883"/><rect fill="#FFC0CB" height="4720.4102" style="stroke: #A80036; stroke-width: 2.5;" width="25" x="3921.25" y="536.2305"/><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4356.25" x="7.5" y="589.1699"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="589.1699" y2="589.1699"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="596.6699" y2="596.6699"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="410" x="1980.625" y="561.2305"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="365" x="1995.625" y="604.9683">Virtual SE Initialization</text><polygon fill="#A80036" points="2935,774.7461,2910,784.7461,2935,794.7461,2925,784.7461" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2920" x2="3918.75" y1="784.7461" y2="784.7461"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="432.5" x="2950" y="690.8472">seProxyService.registerPlugin</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="482.5" x="2960" y="731.7261">(RemoteSeServerPluginFactory...</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="407.5" x="2990" y="772.605">.withPluginObserver (this)...)</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="445" x="2462.5" y="698.2227"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="410" x="2480" y="752.0557">RemoteSeServerPlugin</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3946.25" x2="4063.75" y1="889.0039" y2="889.0039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="4063.75" x2="4063.75" y1="889.0039" y2="921.5039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3961.25" x2="4063.75" y1="921.5039" y2="921.5039"/><polygon fill="#A80036" points="3986.25,911.5039,3961.25,921.5039,3986.25,931.5039,3976.25,921.5039" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="265" x="3976.25" y="835.9839">Awaiting receipt of</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="237.5" x="3986.25" y="876.8628">a Plugin Event...</text><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4356.25" x="7.5" y="1006.9434"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="1006.9434" y2="1006.9434"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="1014.4434" y2="1014.4434"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="405" x="1983.125" y="979.0039"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="360" x="1998.125" y="1022.7417">Native SE Initialization</text><polygon fill="#A80036" points="1977.5,1110.7617,2002.5,1120.7617,1977.5,1130.7617,1987.5,1120.7617" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1492.5" x2="1992.5" y1="1120.7617" y2="1120.7617"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="455" x="1510" y="1108.6206">NativeSeClientServiceFactory...</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="430" x="2007.5" y="1064.8828"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="395" x="2025" y="1118.7158">NativeSeClientService</text><polygon fill="#A80036" points="1002.5,1258.1641,977.5,1268.1641,1002.5,1278.1641,992.5,1268.1641" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="987.5" x2="1465" y1="1268.1641" y2="1268.1641"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="432.5" x="1017.5" y="1215.144">seProxyService.registerPlugin</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="270" x="1027.5" y="1256.0229">(new XXXFactory())</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="272.5" x="702.5" y="1181.6406"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237.5" x="720" y="1235.4736">ReaderPlugin</text><polygon fill="#A80036" points="703.75,1334.043,678.75,1344.043,703.75,1354.043,693.75,1344.043" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="688.75" x2="823.75" y1="1344.043" y2="1344.043"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="90" x="718.75" y="1331.9019">create</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="367.5" x="308.75" y="1288.1641"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="332.5" x="326.25" y="1341.9971">ObservableReader</text><polygon fill="#A80036" points="1437.5,1399.6875,1462.5,1409.6875,1437.5,1419.6875,1447.5,1409.6875" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="838.75" x2="1452.5" y1="1409.6875" y2="1409.6875"/><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4356.25" x="7.5" y="1482.627"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="1482.627" y2="1482.627"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="1490.127" y2="1490.127"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="400" x="1985.625" y="1454.6875"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="355" x="2000.625" y="1498.4253">Native SE SeSelection</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1492.5" x2="1597.5" y1="1596.4453" y2="1596.4453"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1597.5" x2="1597.5" y1="1596.4453" y2="1628.9453"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1495" x2="1597.5" y1="1628.9453" y2="1628.9453"/><polygon fill="#A80036" points="1520,1618.9453,1495,1628.9453,1520,1638.9453,1510,1628.9453" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="325" x="1510" y="1584.3042">Start Ticketing Service</text><polygon fill="#A80036" points="878.75,1694.8242,853.75,1704.8242,878.75,1714.8242,868.75,1704.8242" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="863.75" x2="1465" y1="1704.8242" y2="1704.8242"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="257.5" x="893.75" y="1692.6831">getReader (name)</text><polygon fill="#A80036" points="1437.5,1770.7031,1462.5,1780.7031,1437.5,1790.7031,1447.5,1780.7031" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="838.75" x2="1452.5" y1="1780.7031" y2="1780.7031"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="90" x="856.25" y="1768.562">reader</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1492.5" x2="1597.5" y1="1856.582" y2="1856.582"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1597.5" x2="1597.5" y1="1856.582" y2="1889.082"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1495" x2="1597.5" y1="1889.082" y2="1889.082"/><polygon fill="#A80036" points="1520,1879.082,1495,1889.082,1520,1899.082,1510,1889.082" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="402.5" x="1510" y="1844.4409">prepareSeSelection (reader)</text><polygon fill="#A80036" points="532.5,1954.9609,507.5,1964.9609,532.5,1974.9609,522.5,1964.9609" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="517.5" x2="1465" y1="1964.9609" y2="1964.9609"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="340" x="547.5" y="1952.8198">setSeSelectionRequest</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="475" x2="450" y1="2040.8398" y2="2030.8398"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="475" x2="450" y1="2040.8398" y2="2050.8398"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="110" x2="477.5" y1="2040.8398" y2="2040.8398"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="310" x="127.5" y="2028.6987">SE_MATCHED Event</text><polygon fill="#A80036" points="137.5,2106.7188,112.5,2116.7188,137.5,2126.7188,127.5,2116.7188" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="122.5" x2="477.5" y1="2116.7188" y2="2116.7188"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="152.5" y="2104.5776">C-APDU</text><polygon fill="#A80036" points="450,2182.5977,475,2192.5977,450,2202.5977,460,2192.5977" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="110" x2="465" y1="2192.5977" y2="2192.5977"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="127.5" y="2180.4565">R-APDU</text><polygon fill="#A80036" points="1437.5,2258.4766,1462.5,2268.4766,1437.5,2278.4766,1447.5,2268.4766" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="492.5" x2="1452.5" y1="2268.4766" y2="2268.4766"/><text fill="#FF0000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="510" y="2256.3354">matchingSe</text><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4356.25" x="7.5" y="2341.416"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="2341.416" y2="2341.416"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="2348.916" y2="2348.916"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="1072.5" x="1649.375" y="2313.4766"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="1027.5" x="1664.375" y="2357.2144">Execute Remote Service for a specific Observable Native Reader</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1492.5" x2="1597.5" y1="2455.2344" y2="2455.2344"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1597.5" x2="1597.5" y1="2455.2344" y2="2487.7344"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1495" x2="1597.5" y1="2487.7344" y2="2487.7344"/><polygon fill="#A80036" points="1520,2477.7344,1495,2487.7344,1520,2497.7344,1510,2487.7344" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="342.5" x="1510" y="2443.0933">prepareUserInputData ()</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="1492.5" x2="1597.5" y1="2563.6133" y2="2563.6133"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1597.5" x2="1597.5" y1="2563.6133" y2="2596.1133"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1495" x2="1597.5" y1="2596.1133" y2="2596.1133"/><polygon fill="#A80036" points="1520,2586.1133,1495,2596.1133,1520,2606.1133,1510,2596.1133" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="465" x="1510" y="2551.4722">NativeSeClientUtils.getService ()</text><polygon fill="#A80036" points="2180,2866.3867,2205,2876.3867,2180,2886.3867,2190,2876.3867" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="1492.5" x2="2195" y1="2876.3867" y2="2876.3867"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="352.5" x="1510" y="2659.8511">executeRemoteService (</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="385" x="1520" y="2700.73">RemoteServiceParameters</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="115" x="1540" y="2741.6089">.builder(</text><text fill="#0000FF" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="1655" y="2741.6089">serviceId</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="120" x="1797.5" y="2741.6089">, reader)</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="305" x="1540" y="2782.4878">.withInitialSeContent(</text><text fill="#FF0000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="1845" y="2782.4878">matchingSe</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="10" x="2035" y="2782.4878">)</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="282.5" x="1540" y="2823.3667">.withUserInputData(</text><text fill="#008000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="1822.5" y="2823.3667">userInputData</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="117.5" x="2042.5" y="2823.3667">).build(),</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="330" x="1520" y="2864.2456">UserOutputData.class)</text><polygon fill="#A80036" points="2642.5,2901.3867,2667.5,2911.3867,2642.5,2921.3867,2652.5,2911.3867" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2235" x2="2657.5" y1="2911.3867" y2="2911.3867"/><polygon fill="#A80036" points="2902.5,2977.2656,2927.5,2987.2656,2902.5,2997.2656,2912.5,2987.2656" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2697.5" x2="2917.5" y1="2987.2656" y2="2987.2656"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="90" x="2715" y="2975.1245">create</text><rect fill="#ADD8E6" height="79.0234" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 3.75;" width="667.5" x="2932.5" y="2931.3867"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="632.5" x="2950" y="2985.2197">RemoteSeServerObservableReader</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3916.25" x2="3891.25" y1="3093.7891" y2="3083.7891"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3916.25" x2="3891.25" y1="3093.7891" y2="3103.7891"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2685" x2="3918.75" y1="3093.7891" y2="3093.7891"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="750" x="2702.5" y="3081.6479">notify (READER_CONNECTED, virtualReaderName)</text><polygon fill="#A80036" points="2725,3159.668,2700,3169.668,2725,3179.668,2715,3169.668" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2710" x2="3918.75" y1="3169.668" y2="3169.668"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="447.5" x="2740" y="3157.5269">getReader (virtualReaderName)</text><polygon fill="#A80036" points="3891.25,3235.5469,3916.25,3245.5469,3891.25,3255.5469,3901.25,3245.5469" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="2685" x2="3906.25" y1="3245.5469" y2="3245.5469"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="185" x="2702.5" y="3233.4058">virtualReader</text><polygon fill="#A80036" points="3306.25,3311.4258,3281.25,3321.4258,3306.25,3331.4258,3296.25,3321.4258" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3291.25" x2="3918.75" y1="3321.4258" y2="3321.4258"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="205" x="3321.25" y="3309.2847">getServiceId ()</text><polygon fill="#A80036" points="3891.25,3387.3047,3916.25,3397.3047,3891.25,3407.3047,3901.25,3397.3047" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3266.25" x2="3906.25" y1="3397.3047" y2="3397.3047"/><text fill="#0000FF" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="3283.75" y="3385.1636">serviceId</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3946.25" x2="4051.25" y1="3514.0625" y2="3514.0625"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="4051.25" x2="4051.25" y1="3514.0625" y2="3546.5625"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3948.75" x2="4051.25" y1="3546.5625" y2="3546.5625"/><polygon fill="#A80036" points="3973.75,3536.5625,3948.75,3546.5625,3973.75,3556.5625,3963.75,3546.5625" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="305" x="3963.75" y="3461.0425">Find ticketing service</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="190" x="3963.75" y="3501.9214">to start using</text><text fill="#0000FF" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="4163.75" y="3501.9214">serviceId</text><rect fill="#EEEEEE" height="7.5" style="stroke: #EEEEEE; stroke-width: 2.5;" width="4356.25" x="7.5" y="3619.502"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="3619.502" y2="3619.502"/><line style="stroke: #000000; stroke-width: 2.5;" x1="7.5" x2="4363.75" y1="3627.002" y2="3627.002"/><rect fill="#EEEEEE" height="60.8789" style="stroke: #000000; stroke-width: 5.0;" width="452.5" x="1959.375" y="3591.5625"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="407.5" x="1974.375" y="3635.3003">Remote Ticketing Service</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3946.25" x2="4051.25" y1="3733.3203" y2="3733.3203"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="4051.25" x2="4051.25" y1="3733.3203" y2="3765.8203"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3948.75" x2="4051.25" y1="3765.8203" y2="3765.8203"/><polygon fill="#A80036" points="3973.75,3755.8203,3948.75,3765.8203,3973.75,3775.8203,3963.75,3765.8203" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="325" x="3963.75" y="3721.1792">Start Ticketing Service</text><polygon fill="#A80036" points="3306.25,3831.6992,3281.25,3841.6992,3306.25,3851.6992,3296.25,3841.6992" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3291.25" x2="3918.75" y1="3841.6992" y2="3841.6992"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="302.5" x="3321.25" y="3829.5581">getInitialSeContent ()</text><polygon fill="#A80036" points="3891.25,3907.5781,3916.25,3917.5781,3891.25,3927.5781,3901.25,3917.5781" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3266.25" x2="3906.25" y1="3917.5781" y2="3917.5781"/><text fill="#FF0000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="3283.75" y="3905.437">matchingSe</text><polygon fill="#A80036" points="3306.25,4024.3359,3281.25,4034.3359,3306.25,4044.3359,3296.25,4034.3359" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3291.25" x2="3918.75" y1="4034.3359" y2="4034.3359"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="250" x="3321.25" y="3981.3159">getUserInputData</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="312.5" x="3331.25" y="4022.1948">(UserInputData.class)</text><polygon fill="#A80036" points="3891.25,4100.2148,3916.25,4110.2148,3891.25,4120.2148,3901.25,4110.2148" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3266.25" x2="3906.25" y1="4110.2148" y2="4110.2148"/><text fill="#008000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="3283.75" y="4098.0737">userInputData</text><polygon fill="#A80036" points="3306.25,4176.0938,3281.25,4186.0938,3306.25,4196.0938,3296.25,4186.0938" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3291.25" x2="3918.75" y1="4186.0938" y2="4186.0938"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="262.5" x="3321.25" y="4173.9526">addObserver (this)</text><polygon fill="#A80036" points="3891.25,4211.0938,3916.25,4221.0938,3891.25,4231.0938,3901.25,4221.0938" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3266.25" x2="3906.25" y1="4221.0938" y2="4221.0938"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3946.25" x2="4051.25" y1="4296.9727" y2="4296.9727"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="4051.25" x2="4051.25" y1="4296.9727" y2="4329.4727"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3948.75" x2="4051.25" y1="4329.4727" y2="4329.4727"/><polygon fill="#A80036" points="3973.75,4319.4727,3948.75,4329.4727,3973.75,4339.4727,3963.75,4329.4727" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="152.5" x="3963.75" y="4284.8315">continue...</text><path d="M45,4366.9727 L215,4366.9727 L215,4386.9727 L190,4411.9727 L32.5,4411.9727 L32.5,4379.4727 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 2.5;"/><rect fill="none" height="498.6523" rx="12.5" ry="12.5" style="stroke: #000000; stroke-width: 5.0;" width="4235" x="32.5" y="4366.9727"/><text fill="#000000" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="70" y="4403.2104">loop</text><text fill="#000000" font-family="sans-serif" font-size="27.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="252.5" y="4400.52">[SE exchanges]</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3946.25" x2="4051.25" y1="4509.6094" y2="4509.6094"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="4051.25" x2="4051.25" y1="4509.6094" y2="4542.1094"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3948.75" x2="4051.25" y1="4542.1094" y2="4542.1094"/><polygon fill="#A80036" points="3973.75,4532.1094,3948.75,4542.1094,3973.75,4552.1094,3963.75,4542.1094" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="267.5" x="3963.75" y="4456.5894">prepareSeRequest</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="205" x="3973.75" y="4497.4683">(virtualReader)</text><polygon fill="#A80036" points="3306.25,4607.9883,3281.25,4617.9883,3306.25,4627.9883,3296.25,4617.9883" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3291.25" x2="3918.75" y1="4617.9883" y2="4617.9883"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="305" x="3321.25" y="4605.8472">processSeRequest ()</text><polygon fill="#A80036" points="137.5,4683.8672,112.5,4693.8672,137.5,4703.8672,127.5,4693.8672" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="122.5" x2="3251.25" y1="4693.8672" y2="4693.8672"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="152.5" y="4681.7261">C-APDU</text><polygon fill="#A80036" points="3223.75,4759.7461,3248.75,4769.7461,3223.75,4779.7461,3233.75,4769.7461" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="110" x2="3238.75" y1="4769.7461" y2="4769.7461"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="122.5" x="127.5" y="4757.605">R-APDU</text><polygon fill="#A80036" points="3891.25,4835.625,3916.25,4845.625,3891.25,4855.625,3901.25,4845.625" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="3266.25" x2="3906.25" y1="4845.625" y2="4845.625"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="132.5" x="3283.75" y="4833.4839">response</text><line style="stroke: #A80036; stroke-width: 2.5;" x1="3946.25" x2="4051.25" y1="4939.0039" y2="4939.0039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="4051.25" x2="4051.25" y1="4939.0039" y2="4971.5039"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="3948.75" x2="4051.25" y1="4971.5039" y2="4971.5039"/><polygon fill="#A80036" points="3973.75,4961.5039,3948.75,4971.5039,3973.75,4981.5039,3963.75,4971.5039" style="stroke: #A80036; stroke-width: 2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="370" x="3963.75" y="4926.8628">prepareUserOutputData ()</text><polygon fill="#A80036" points="2725,5037.3828,2700,5047.3828,2725,5057.3828,2715,5047.3828" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2710" x2="3918.75" y1="5047.3828" y2="5047.3828"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="540" x="2740" y="5035.2417">terminateService (virtualReaderName,</text><text fill="#800080" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="3290" y="5035.2417">userOutputData</text><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="10" x="3535" y="5035.2417">)</text><line style="stroke: #A80036; stroke-width: 5.0;" x1="3221.25" x2="3246.25" y1="5110.7617" y2="5135.7617"/><line style="stroke: #A80036; stroke-width: 5.0;" x1="3221.25" x2="3246.25" y1="5135.7617" y2="5110.7617"/><line style="stroke: #A80036; stroke-width: 2.5;" x1="2697.5" x2="3233.75" y1="5123.2617" y2="5123.2617"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacingAndGlyphs" textLength="295" x="2715" y="5111.1206">remove virtual reader</text><polygon fill="#A80036" points="2262.5,5148.2617,2237.5,5158.2617,2262.5,5168.2617,2252.5,5158.2617" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="2247.5" x2="2682.5" y1="5158.2617" y2="5158.2617"/><polygon fill="#A80036" points="1520,5224.1406,1495,5234.1406,1520,5244.1406,1510,5234.1406" style="stroke: #A80036; stroke-width: 2.5;"/><line style="stroke: #A80036; stroke-width: 2.5; stroke-dasharray: 2.0,2.0;" x1="1505" x2="2220" y1="5234.1406" y2="5234.1406"/><text fill="#800080" font-family="sans-serif" font-size="32.5" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="1535" y="5221.9995">userOutputData</text><!--MD5=[a382264bb69d68cc9facac2b4b49806a]
@startuml
title
    Keyple Plugin Remote SE
    RemoteSeServerPlugin API (22/05/2020)
    (with an ObservableReader)
end title


skinparam Shadowing false
skinparam RoundCorner 10



participant "SE" as se

box "Native SE" #FEF9E7
participant "**ObservableReader**" as reader #LightBlue
participant "**ReaderPlugin**" as plugin #LightBlue
actor "**Native SE App**" as client
participant "**NativeSeClientService**" as nativeSeService #LightBlue
end box

box "Virtual SE" #FDF2E9
participant "**RemoteSeServerPlugin**" as remoteSePlugin #LightBlue
participant "**RemoteSeServerObservableReader**" as virtualReader #LightBlue
actor "**Virtual SE App**:\n**<back:LightBlue>ObservablePlugin.PluginObserver**" as server
end box

== Virtual SE Initialization ==

activate server #Pink
server -> remoteSePlugin ** : seProxyService.registerPlugin\n (RemoteSeServerPluginFactory...\n    .withPluginObserver (this)...)
server -> server : Awaiting receipt of\n a Plugin Event...

== Native SE Initialization ==

activate client #Pink
client -> nativeSeService ** : NativeSeClientServiceFactory...
client -> plugin ** : seProxyService.registerPlugin\n (new XXXFactory())
activate plugin #LightBlue
plugin -> reader ** : create
return

== Native SE SeSelection ==

client -> client : Start Ticketing Service
client -> plugin : getReader (name)
activate plugin #LightBlue
return reader
client -> client : prepareSeSelection (reader)
client -> reader : setSeSelectionRequest
activate reader #LightBlue

activate se #LightYellow
se ->> reader : SE_MATCHED Event
reader -> se : C-APDU
se - -> reader : R-APDU
return <color:red>**matchingSe**</color>

== Execute Remote Service for a specific Observable Native Reader ==

client -> client : prepareUserInputData ()

client -> client : NativeSeClientUtils.getService ()
client -> nativeSeService : executeRemoteService (\n RemoteServiceParameters\n   .builder(<color:blue>**serviceId**</color>, reader)\n   .withInitialSeContent(<color:red>**matchingSe**</color>)\n   .withUserInputData(<color:green>**userInputData**</color>).build(),\n UserOutputData.class)
activate nativeSeService #LightBlue

nativeSeService -> remoteSePlugin
activate remoteSePlugin #LightBlue
remoteSePlugin -> virtualReader ** : create
remoteSePlugin ->> server : notify (READER_CONNECTED, virtualReaderName)
deactivate remoteSePlugin

server -> remoteSePlugin : getReader (virtualReaderName)
activate remoteSePlugin #LightBlue
return virtualReader
server -> virtualReader : getServiceId ()
activate virtualReader #LightBlue
return <color:blue>**serviceId**</color>
server -> server : Find ticketing service\nto start using <color:blue>**serviceId**</color>

== Remote Ticketing Service ==

server -> server : Start Ticketing Service
server -> virtualReader : getInitialSeContent ()
activate virtualReader #LightBlue
return <color:red>**matchingSe**</color>
server -> virtualReader : getUserInputData\n (UserInputData.class)
activate virtualReader #LightBlue
return <color:green>**userInputData**</color>
server -> virtualReader : addObserver (this)
activate virtualReader #LightBlue
return
server -> server : continue...

loop #FDF2E9 SE exchanges
    server -> server : prepareSeRequest\n (virtualReader)
    server -> virtualReader : processSeRequest ()
    activate virtualReader #LightBlue
    virtualReader -> se : C-APDU
    se - -> virtualReader : R-APDU
    return response
end loop

server -> server : prepareUserOutputData ()
server -> remoteSePlugin : terminateService (virtualReaderName, <color:purple>**userOutputData**</color>)
activate remoteSePlugin #LightBlue
remoteSePlugin -x virtualReader : remove virtual reader

remoteSePlugin - -> nativeSeService
deactivate remoteSePlugin
nativeSeService - -> client : <color:purple>**userOutputData**</color>
deactivate nativeSeService

@enduml

PlantUML version 1.2020.09(Sun May 10 12:51:06 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-b765.53
Operating System: Windows 10
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>